<!doctype html><html lang=ja><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>【GitHub】PR一覧画面でフィルターのデフォルト値を設定したい！ &#183; からまるのブログ</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/images/ren.png><link href rel=alternate type=application/rss+xml title=からまるのブログ><meta property="og:url" content="https://karamaru-alpha.com/posts/github-default-filter/"><meta property="og:site_name" content="からまるのブログ"><meta property="og:title" content="【GitHub】PR一覧画面でフィルターのデフォルト値を設定したい！"><meta property="og:description" content="「is:pr is:open」に追加して「draft:false」とかをデフォルトでつけたい！"><meta property="og:locale" content="ja"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-07-17T00:12:48+09:00"><meta property="article:modified_time" content="2025-07-17T00:12:48+09:00"><meta property="og:image" content="https://karamaru-alpha.com/images/karamaru.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://karamaru-alpha.com/images/karamaru.jpg"><meta name=twitter:title content="【GitHub】PR一覧画面でフィルターのデフォルト値を設定したい！"><meta name=twitter:description content="「is:pr is:open」に追加して「draft:false」とかをデフォルトでつけたい！"><script src=/js/darkmode.js></script></head><body><nav class=nav><div class=nav-container><a href=/><h2 class=nav-title>からまるのブログ</h2></a><ul><li><a href=https://github.com/karamaru-alpha target=_blank rel="noopener noreferrer"><span>GitHub</span></a></li><li><a href=https://x.com/karamaru_alpha target=_blank rel="noopener noreferrer"><span>X</span></a></li><li><a href=https://speakerdeck.com/karamaru target=_blank rel="noopener noreferrer"><span>SpeackerDeck</span></a></li><li><a href=https://sizu.me/karamaru_alpha target=_blank rel="noopener noreferrer"><span>SizuIn</span></a></li><li><a href=https://www.linkedin.com/in/karamaru target=_blank rel="noopener noreferrer"><span>LinkedIn</span></a></li><li><a href=https://karamaru-alpha.com/index.xml target=_blank rel="noopener noreferrer"><span>RSS</span></a></li></ul></div></nav><div id=darkModeToggle onclick=toggleDarkMode()>&#9680;</div><main><div class=post><div class=post-info><span></span><br><span>&nbsp;</span><time datetime="2025-07-17 00:12:48 +0900 JST">2025/07/17</time></div><h1 class=post-title>【GitHub】PR一覧画面でフィルターのデフォルト値を設定したい！</h1><div class=post-line></div><p>「is:pr is:open」に追加して「draft:false」とかをデフォルトでつけたい！</p><h2 id=先に結論>先に結論</h2><p>Arc Boosts で js を仕込んで書き換える。</p><p>@see: <a href=https://github.com/orgs/community/discussions/51751#discussioncomment-10602945>https://github.com/orgs/community/discussions/51751#discussioncomment-10602945</a></p><h2 id=動機>動機</h2><p>GitHub の PR/Issue 検索窓のフィルター、使ってますか！</p><p>僕は「created:YYYY-MM-DD..YYYY-MM-DD」構文が一番好きです ☺️</p><p>cf. <a href=https://docs.github.com/en/issues/tracking-your-work-with-issues/using-issues/filtering-and-searching-issues-and-pull-requests>Filtering and searching issues and pull requests</a></p><figure class=center><img src=/posts/github-default-filter/search.png width=600></figure><p>さて、大人数で開発してると DraftPR で画面がいっぱいになってうんざりすること、ありますよね。</p><p>そんな時は検索窓に「draft:false」を追加するんですけど、毎回指定するのもナンセンスというか、遷移したらデフォルトでこのフィルターがついて欲しいと思ったんですよね！</p><p>一方、現在はデフォルトのフィルターを保存する機能は GitHub に備わっておらず、ユーザー側で頑張る必要があります mm</p><p>手順を以下に示します。</p><h2 id=手順>手順</h2><p>Arc ユーザーであれば<a href=https://arcboosts.com/boosts>Arc Boosts</a>という機能でサイトに script を仕込むことができます。以下、Arc 前提で進めます。（Arc ユーザーでない場合は<a href="https://chromewebstore.google.com/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=en">Tampermonkey</a>などのユーザースクリプトプラグインで対応する感じになります）</p><p>まず、ブラウザ左下のメニューから「New Boost」を選択します。</p><figure class=center><img src=/posts/github-default-filter/image.png width=300></figure><p>するとこんなフォントや色彩を変えられるパレットが出てきてきます。
見た目変えられるだけでちょっと楽しい。</p><figure class=center><img src=/posts/github-default-filter/sample.png width=400></figure><p>さて、「Code」を押すとユーザースクリプトを仕込める画面が出てくるので、以下コードをぺたっと貼り付けましょう。</p><p>これで、初回遷移時（フィルターが URL に存在しない場合）にラベルが「is:pr is:open draft:false」になります 👏</p><figure class=center><img src=/posts/github-default-filter/js.png width=600></figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DEFAULT_FILTERS</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;is:pr&#34;</span>, <span style=color:#e6db74>&#34;is:open&#34;</span>, <span style=color:#e6db74>&#34;draft:false&#34;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updateAnchor</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>element</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>getAttribute</span>(<span style=color:#e6db74>&#34;href&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>href</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>href</span>.<span style=color:#a6e22e>startsWith</span>(<span style=color:#e6db74>&#34;/&#34;</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>URL</span>(<span style=color:#a6e22e>href</span>, window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>origin</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>pathname</span>.<span style=color:#a6e22e>endsWith</span>(<span style=color:#e6db74>&#34;/pulls&#34;</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>pageParam</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>searchParams</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;page&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>pageParam</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>query</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>searchParams</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;q&#34;</span>)<span style=color:#f92672>?</span>.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#34; &#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>query</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>searchParams</span>.<span style=color:#a6e22e>set</span>(<span style=color:#e6db74>&#34;q&#34;</span>, <span style=color:#a6e22e>DEFAULT_FILTERS</span>.<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#34; &#34;</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>setAttribute</span>(<span style=color:#e6db74>&#34;href&#34;</span>, <span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>href</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>query</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>query</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#34;draft:false&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>searchParams</span>.<span style=color:#a6e22e>set</span>(<span style=color:#e6db74>&#34;q&#34;</span>, <span style=color:#a6e22e>query</span>.<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#34; &#34;</span>));
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>setAttribute</span>(<span style=color:#e6db74>&#34;href&#34;</span>, <span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>href</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updateAll</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>elements</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelectorAll</span>(<span style=color:#e6db74>&#34;a[href]&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>element</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>elements</span>) <span style=color:#a6e22e>updateAnchor</span>(<span style=color:#a6e22e>element</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>observe</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>mutations</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>mutation</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>mutations</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>type</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;childList&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>node</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>addedNodes</span>) {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>nodeType</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>Node</span>.<span style=color:#a6e22e>ELEMENT_NODE</span>) <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>tagName</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;A&#34;</span>) <span style=color:#a6e22e>updateAnchor</span>(<span style=color:#a6e22e>node</span>);
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>anchor</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>querySelectorAll</span>(<span style=color:#e6db74>&#34;a[href]&#34;</span>))
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>updateAnchor</span>(<span style=color:#a6e22e>anchor</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;attributes&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>attributeName</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#34;href&#34;</span>) <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>updateAnchor</span>(<span style=color:#a6e22e>mutation</span>.<span style=color:#a6e22e>target</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>observer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MutationObserver</span>(<span style=color:#a6e22e>observe</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>observer</span>.<span style=color:#a6e22e>observe</span>(document.<span style=color:#a6e22e>documentElement</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>childList</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>subtree</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>attributes</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>attributeFilter</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;href&#34;</span>],
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>document.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;DOMContentLoaded&#34;</span>, <span style=color:#a6e22e>updateAll</span>);
</span></span></code></pre></div><p>後からフィルターを操作した場合にデフォルト値に強制的に戻されるようなこともなくいい感じです。素敵 👏</p><h2 id=終わりに>終わりに</h2><p>全部冒頭に貼った issue に書いてあることなんですけど、プチ感動したので書いてみました。</p><p>こういうのでいいんだよ。こういうので。。。！</p></div><div class=pagination><a href=/posts/talk-about-code-generation/ class="left arrow">&#8592;</a>
<a href=# class=top>Top</a></div></main><footer><span>&copy; <time datetime="2025-10-01 00:30:39.354597 +0900 JST m=+0.036418709">2025</time> . Made with <a href=https://gohugo.io>Hugo</a> using the <a href=https://github.com/EmielH/tale-hugo/>Tale</a> theme.</span></footer></body></html>